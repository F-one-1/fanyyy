import{u as a,c as t,w as r,_ as c,o as p,a as s,d as o}from"./app.a35a1e04.js";const y=s("div",{class:"prose m-auto"},[s("blockquote",null,[s("p",null,[o("Note: This is my personal notes/tips for migrating to Vue 3 and will be updated overtime. Please refer to "),s("a",{href:"https://v3.vuejs.org",target:"_blank",rel:"noopener"},"the official docs"),o(" for the complete changelog.")])]),s("p",null,"Sorted by the importance of my personal sense."),s("h3",{id:"\u{1F4AB}-use-markraw-for-vendor-objects",tabindex:"-1"},[o("\u{1F4AB} use "),s("code",null,"markRaw"),o(" for vendor objects "),s("a",{class:"header-anchor",href:"#\u{1F4AB}-use-markraw-for-vendor-objects","aria-hidden":"true"},"#")]),s("p",null,[o("The new reactivity system proxied the object passed to the Vue context. For vendor objects or class instances, you need to wrap it with "),s("code",null,"markRaw"),o(" in order to disable the reactivity injection.")]),s("pre",null,[s("code",{class:"language-ts"},[s("div",{class:"shiki-container"},[s("pre",{class:"shiki shiki-dark",style:{"background-color":"#121212"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#758575"}},"// works in Vue 2")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4976C"}},"this"),s("span",{style:{color:"#858585"}},"."),s("span",{style:{color:"#B8A965"}},"codemirror"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#CB7676"}},"="),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#B8A965"}},"CodeMirror"),s("span",{style:{color:"#858585"}},"."),s("span",{style:{color:"#A1B567"}},"fromTextArea"),s("span",{style:{color:"#858585"}},"("),s("span",{style:{color:"#B8A965"}},"el"),s("span",{style:{color:"#858585"}},")")]),o(`
`),s("span",{class:"line"}),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#758575"}},"// in Vue 3 you need to use markRaw()")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#758575"}},"// otherwise the CodeMirror won't work as expected")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4976C"}},"this"),s("span",{style:{color:"#858585"}},"."),s("span",{style:{color:"#B8A965"}},"codemirror"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#CB7676"}},"="),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#A1B567"}},"markRaw"),s("span",{style:{color:"#858585"}},"("),s("span",{style:{color:"#B8A965"}},"CodeMirror"),s("span",{style:{color:"#858585"}},"."),s("span",{style:{color:"#A1B567"}},"fromTextArea"),s("span",{style:{color:"#858585"}},"("),s("span",{style:{color:"#B8A965"}},"el"),s("span",{style:{color:"#858585"}},"))")]),o(`
`),s("span",{class:"line"})])]),s("pre",{class:"shiki shiki-light",style:{"background-color":"#ffffff"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0"}},"// works in Vue 2")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A65E2B"}},"this"),s("span",{style:{color:"#8E8F8B"}},"."),s("span",{style:{color:"#8C862B"}},"codemirror"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#AB5959"}},"="),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#8C862B"}},"CodeMirror"),s("span",{style:{color:"#8E8F8B"}},"."),s("span",{style:{color:"#6C7834"}},"fromTextArea"),s("span",{style:{color:"#8E8F8B"}},"("),s("span",{style:{color:"#8C862B"}},"el"),s("span",{style:{color:"#8E8F8B"}},")")]),o(`
`),s("span",{class:"line"}),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0"}},"// in Vue 3 you need to use markRaw()")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0"}},"// otherwise the CodeMirror won't work as expected")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A65E2B"}},"this"),s("span",{style:{color:"#8E8F8B"}},"."),s("span",{style:{color:"#8C862B"}},"codemirror"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#AB5959"}},"="),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#6C7834"}},"markRaw"),s("span",{style:{color:"#8E8F8B"}},"("),s("span",{style:{color:"#8C862B"}},"CodeMirror"),s("span",{style:{color:"#8E8F8B"}},"."),s("span",{style:{color:"#6C7834"}},"fromTextArea"),s("span",{style:{color:"#8E8F8B"}},"("),s("span",{style:{color:"#8C862B"}},"el"),s("span",{style:{color:"#8E8F8B"}},"))")]),o(`
`),s("span",{class:"line"})])])])])]),s("p",null,"I think this is a pretty tricky one. You won\u2019t see any warn or error on initialization, but the internal state of the vendor object might be messed up. You might face errors that comes from the libraries while couldn\u2019t find out why (the example above took me one hour of debugging to find out)."),s("h3",{id:"\u{1F4AB}-sync-\u2192-v-model",tabindex:"-1"},[o("\u{1F4AB} "),s("code",null,".sync"),o(" \u2192 "),s("code",null,"v-model:"),o(),s("a",{class:"header-anchor",href:"#\u{1F4AB}-sync-\u2192-v-model","aria-hidden":"true"},"#")]),s("p",null,[s("code",null,".sync"),o(" modifier is unified by "),s("code",null,"v-model:")]),s("pre",null,[s("code",{class:"language-html"},[s("div",{class:"shiki-container"},[s("pre",{class:"shiki shiki-dark",style:{"background-color":"#121212"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#758575"}},"<!-- Vue 2 -->")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#858585"}},"<"),s("span",{style:{color:"#FDAEB7","font-style":"italic"}},"Component"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#E0A569"}},"name.sync"),s("span",{style:{color:"#858585"}},"="),s("span",{style:{color:"#C98A7D"}},'"name"'),s("span",{style:{color:"#858585"}},"/>")]),o(`
`),s("span",{class:"line"}),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#758575"}},"<!-- Vue 3 -->")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#858585"}},"<"),s("span",{style:{color:"#FDAEB7","font-style":"italic"}},"Component"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#E0A569"}},"v-model:name"),s("span",{style:{color:"#858585"}},"="),s("span",{style:{color:"#C98A7D"}},'"name"'),s("span",{style:{color:"#858585"}},"/>")]),o(`
`),s("span",{class:"line"})])]),s("pre",{class:"shiki shiki-light",style:{"background-color":"#ffffff"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0"}},"<!-- Vue 2 -->")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#8E8F8B"}},"<"),s("span",{style:{color:"#B31D28","font-style":"italic"}},"Component"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B58451"}},"name.sync"),s("span",{style:{color:"#8E8F8B"}},"="),s("span",{style:{color:"#B56959"}},'"name"'),s("span",{style:{color:"#8E8F8B"}},"/>")]),o(`
`),s("span",{class:"line"}),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0"}},"<!-- Vue 3 -->")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#8E8F8B"}},"<"),s("span",{style:{color:"#B31D28","font-style":"italic"}},"Component"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B58451"}},"v-model:name"),s("span",{style:{color:"#8E8F8B"}},"="),s("span",{style:{color:"#B56959"}},'"name"'),s("span",{style:{color:"#8E8F8B"}},"/>")]),o(`
`),s("span",{class:"line"})])])])])]),s("p",null,[s("code",null,"v-model"),o(" on native element would be "),s("code",null,"value/input"),o(" while on custom components, it changed to "),s("code",null,"modelValue"),o(" and "),s("code",null,"update:modelValue")]),s("h3",{id:"\u{1F4AB}-shims-vue-d-ts",tabindex:"-1"},[o("\u{1F4AB} "),s("code",null,"shims-vue.d.ts"),o(),s("a",{class:"header-anchor",href:"#\u{1F4AB}-shims-vue-d-ts","aria-hidden":"true"},"#")]),s("blockquote",null,[s("p",null,[o("Update: now you can use "),s("a",{href:"https://github.com/znck/vue-developer-experience/tree/main/packages/typescript-plugin-vue",target:"_blank",rel:"noopener"},[s("code",null,"@vuedx/typescript-plugin-vue")]),o(" for better type inference with SFC (no need for "),s("code",null,"shims-vue.d.ts"),o(" then)")])]),s("p",null,"Changed to this:"),s("pre",null,[s("code",{class:"language-ts"},[s("div",{class:"shiki-container"},[s("pre",{class:"shiki shiki-dark",style:{"background-color":"#121212"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#CB7676"}},"declare"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#CB7676"}},"module"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#C98A7D"}},"'*.vue'"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#858585"}},"{")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"  "),s("span",{style:{color:"#4D9375"}},"import"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#858585"}},"{"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#B8A965"}},"defineComponent"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#858585"}},"}"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#4D9375"}},"from"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#C98A7D"}},"'vue'"),s("span",{style:{color:"#858585"}},";")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"  "),s("span",{style:{color:"#CB7676"}},"const"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#D4976C"}},"Component"),s("span",{style:{color:"#CB7676"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#A1B567"}},"ReturnType"),s("span",{style:{color:"#858585"}},"<"),s("span",{style:{color:"#CB7676"}},"typeof"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#B8A965"}},"defineComponent"),s("span",{style:{color:"#858585"}},">;")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"  "),s("span",{style:{color:"#4D9375"}},"export"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#4D9375"}},"default"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#B8A965"}},"Component"),s("span",{style:{color:"#858585"}},";")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#858585"}},"}")]),o(`
`),s("span",{class:"line"})])]),s("pre",{class:"shiki shiki-light",style:{"background-color":"#ffffff"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#AB5959"}},"declare"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#AB5959"}},"module"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B56959"}},"'*.vue'"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#8E8F8B"}},"{")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#1C6B48"}},"import"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#8E8F8B"}},"{"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#8C862B"}},"defineComponent"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#8E8F8B"}},"}"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#1C6B48"}},"from"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B56959"}},"'vue'"),s("span",{style:{color:"#8E8F8B"}},";")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#AB5959"}},"const"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#A65E2B"}},"Component"),s("span",{style:{color:"#AB5959"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#6C7834"}},"ReturnType"),s("span",{style:{color:"#8E8F8B"}},"<"),s("span",{style:{color:"#AB5959"}},"typeof"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#8C862B"}},"defineComponent"),s("span",{style:{color:"#8E8F8B"}},">;")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#1C6B48"}},"export"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#1C6B48"}},"default"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#8C862B"}},"Component"),s("span",{style:{color:"#8E8F8B"}},";")]),o(`
`),s("span",{class:"line"},[s("span",{style:{color:"#8E8F8B"}},"}")]),o(`
`),s("span",{class:"line"})])])])])])],-1),m="Vue 3 Migration Notes",h="2020-07-01T00:00:00.000Z",C="en",f=[{property:"og:title",content:"Vue 3 Migration Notes"}],D={__name:"vue-3-notes",setup(i,{expose:l}){const e={title:"Vue 3 Migration Notes",date:"2020-07-01T00:00:00.000Z",lang:"en",meta:[{property:"og:title",content:"Vue 3 Migration Notes"}]};return l({frontmatter:e}),a({title:"Vue 3 Migration Notes",meta:[{property:"og:title",content:"Vue 3 Migration Notes"}]}),(u,B)=>{const n=c;return p(),t(n,{frontmatter:e},{default:r(()=>[y]),_:1})}}};export{h as date,D as default,C as lang,f as meta,m as title};

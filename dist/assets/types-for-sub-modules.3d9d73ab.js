import{u as a,c as t,w as c,_ as p,o as r,a as s,d as l}from"./app.07d57fa0.js";const y=s("div",{class:"prose m-auto"},[s("p",null,[l("When you build multiple entries in a single package, you exports them with "),s("code",null,"exports"),l(" syntax. Like")]),s("pre",null,[s("code",{class:"language-json"},[s("div",{class:"shiki-container"},[s("pre",{class:"shiki shiki-dark",style:{"background-color":"#121212"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#858585"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"  "),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#E0A569"}},"exports"),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#858585"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"    "),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#E0A569"}},"."),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#858585"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"      "),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#E0A569"}},"types"),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#C98A7D"}},'"./dist/index.d.ts"'),s("span",{style:{color:"#858585"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"      "),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#E0A569"}},"import"),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#C98A7D"}},'"./dist/index.mjs"'),s("span",{style:{color:"#858585"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"      "),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#E0A569"}},"require"),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#C98A7D"}},'"./dist/index.cjs"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"    "),s("span",{style:{color:"#858585"}},"},")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"    "),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#E0A569"}},"./foo"),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#858585"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"      "),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#E0A569"}},"types"),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#C98A7D"}},'"./dist/foo.d.ts"'),s("span",{style:{color:"#858585"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"      "),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#E0A569"}},"import"),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#C98A7D"}},'"./dist/foo.mjs"'),s("span",{style:{color:"#858585"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"      "),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#E0A569"}},"require"),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#C98A7D"}},'"./dist/foo.cjs"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"    "),s("span",{style:{color:"#858585"}},"},")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"  "),s("span",{style:{color:"#858585"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#858585"}},"}")]),l(`
`),s("span",{class:"line"})])]),s("pre",{class:"shiki shiki-light",style:{"background-color":"#ffffff"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#8E8F8B"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#B58451"}},"exports"),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#8E8F8B"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"    "),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#B58451"}},"."),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#8E8F8B"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"      "),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#B58451"}},"types"),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B56959"}},'"./dist/index.d.ts"'),s("span",{style:{color:"#8E8F8B"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"      "),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#B58451"}},"import"),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B56959"}},'"./dist/index.mjs"'),s("span",{style:{color:"#8E8F8B"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"      "),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#B58451"}},"require"),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B56959"}},'"./dist/index.cjs"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"    "),s("span",{style:{color:"#8E8F8B"}},"},")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"    "),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#B58451"}},"./foo"),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#8E8F8B"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"      "),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#B58451"}},"types"),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B56959"}},'"./dist/foo.d.ts"'),s("span",{style:{color:"#8E8F8B"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"      "),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#B58451"}},"import"),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B56959"}},'"./dist/foo.mjs"'),s("span",{style:{color:"#8E8F8B"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"      "),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#B58451"}},"require"),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B56959"}},'"./dist/foo.cjs"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"    "),s("span",{style:{color:"#8E8F8B"}},"},")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#8E8F8B"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#8E8F8B"}},"}")]),l(`
`),s("span",{class:"line"})])])])])]),s("p",null,[l("Then tho you provide "),s("code",null,"types"),l(" field for the sub modules, most of the users still got the error:")]),s("pre",null,[s("code",{class:"language-txt"},[s("div",{class:"shiki-container"},[s("pre",{class:"shiki shiki-dark",style:{"background-color":"#121212"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}},"Cannot find module 'my-pkg/foo' or its corresponding type declarations.")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#dbd7ca"}})])])]),s("pre",{class:"shiki shiki-light",style:{"background-color":"#ffffff"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#393a34"}},"Cannot find module 'my-pkg/foo' or its corresponding type declarations.")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393a34"}})])])])])])]),s("p",null,[l("Well that\u2019s because the "),s("code",null,"types"),l(" field in "),s("code",null,"exports"),l(" will only be resolved when you add "),s("code",null,'"moduleResolution": "NodeNext"'),l(" to the "),s("code",null,"tsconfig.json"),l(" file. Which might cause more issue since not all the packages are up to date.")]),s("p",null,[l("So when you trying to import "),s("code",null,"my-pkg/foo"),l(", TypeScript actually looking for the "),s("code",null,"foo.d.ts"),l(" file under your package root instead of your "),s("code",null,"dist"),l(" folder. One solution I been used for a long time is to create a redirection file that published to npm, like:")]),s("pre",null,[s("code",{class:"language-ts"},[s("div",{class:"shiki-container"},[s("pre",{class:"shiki shiki-dark",style:{"background-color":"#121212"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#758575"}},"// foo.d.ts")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#4D9375"}},"export"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#858585"}},"{"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#4D9375"}},"default"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#858585"}},"}"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#4D9375"}},"from"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#C98A7D"}},"'./dist/foo.d.ts'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#4D9375"}},"export"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#D4976C"}},"*"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#4D9375"}},"from"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#C98A7D"}},"'./dist/foo.d.ts'")]),l(`
`),s("span",{class:"line"})])]),s("pre",{class:"shiki shiki-light",style:{"background-color":"#ffffff"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#A0ADA0"}},"// foo.d.ts")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1C6B48"}},"export"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#8E8F8B"}},"{"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#1C6B48"}},"default"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#8E8F8B"}},"}"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#1C6B48"}},"from"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B56959"}},"'./dist/foo.d.ts'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#1C6B48"}},"export"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#A65E2B"}},"*"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#1C6B48"}},"from"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#B56959"}},"'./dist/foo.d.ts'")]),l(`
`),s("span",{class:"line"})])])])])]),s("p",null,"Which solve the problem, but also making your root directory quite messy."),s("p",null,[l("Until "),s("a",{href:"https://github.com/tmkx",target:"_blank",rel:"noopener"},"@tmkx"),l(),s("a",{href:"https://github.com/antfu/unplugin-auto-import/pull/120",target:"_blank",rel:"noopener"},"shared me"),l(" this solution:")]),s("pre",null,[s("code",{class:"language-json"},[s("div",{class:"shiki-container"},[s("pre",{class:"shiki shiki-dark",style:{"background-color":"#121212"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#858585"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"  "),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#E0A569"}},"typesVersions"),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#858585"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"    "),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#E0A569"}},"*"),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#858585"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"      "),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#E0A569"}},"*"),s("span",{style:{color:"#858585"}},'"'),s("span",{style:{color:"#858585"}},":"),s("span",{style:{color:"#DBD7CA"}}," "),s("span",{style:{color:"#858585"}},"[")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"        "),s("span",{style:{color:"#C98A7D"}},'"./dist/index.d.ts"'),s("span",{style:{color:"#858585"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"        "),s("span",{style:{color:"#C98A7D"}},'"./dist/*"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"      "),s("span",{style:{color:"#858585"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"    "),s("span",{style:{color:"#858585"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DBD7CA"}},"  "),s("span",{style:{color:"#858585"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#858585"}},"}")]),l(`
`),s("span",{class:"line"})])]),s("pre",{class:"shiki shiki-light",style:{"background-color":"#ffffff"}},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{color:"#8E8F8B"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#B58451"}},"typesVersions"),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#8E8F8B"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"    "),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#B58451"}},"*"),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#8E8F8B"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"      "),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#B58451"}},"*"),s("span",{style:{color:"#8E8F8B"}},'"'),s("span",{style:{color:"#8E8F8B"}},":"),s("span",{style:{color:"#393A34"}}," "),s("span",{style:{color:"#8E8F8B"}},"[")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"        "),s("span",{style:{color:"#B56959"}},'"./dist/index.d.ts"'),s("span",{style:{color:"#8E8F8B"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"        "),s("span",{style:{color:"#B56959"}},'"./dist/*"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"      "),s("span",{style:{color:"#8E8F8B"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"    "),s("span",{style:{color:"#8E8F8B"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#393A34"}},"  "),s("span",{style:{color:"#8E8F8B"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#8E8F8B"}},"}")]),l(`
`),s("span",{class:"line"})])])])])]),s("p",null,[l("Good day! "),s("a",{href:"https://www.typescriptlang.org/docs/handbook/declaration-files/publishing.html#version-selection-with-typesversions",target:"_blank",rel:"noopener"},"Reference")])],-1),D="Types for sub modules",f="2021-03-01T16:00:00.000Z",E="en",h="5min",C=[{property:"og:title",content:"Types for sub modules"}],F={__name:"types-for-sub-modules",setup(i,{expose:n}){const o={title:"Types for sub modules",date:"2021-03-01T16:00:00.000Z",lang:"en",duration:"5min",meta:[{property:"og:title",content:"Types for sub modules"}]};return n({frontmatter:o}),a({title:"Types for sub modules",meta:[{property:"og:title",content:"Types for sub modules"}]}),(B,A)=>{const e=p;return r(),t(e,{frontmatter:o},{default:c(()=>[y]),_:1})}}};export{f as date,F as default,h as duration,E as lang,C as meta,D as title};

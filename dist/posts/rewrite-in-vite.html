<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="author" content="Anthony Fu"><meta http-equiv="X-UA-Compatible" content="chrome=1"><meta name="revisit-after" content="7 days"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="/favicon.svg" type="image/svg+xml"><link rel="alternate" type="application/rss+xml" title="Anthony Fu's Blog" href="/feed.xml"><meta name="msapplication-TileColor" content="#ffffff"><title>Rewrite in Vite</title><script>!function(){var e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,t=localStorage.getItem("vueuse-color-scheme")||"auto";("dark"===t||e&&"light"!==t)&&document.documentElement.classList.toggle("dark",!0)}()</script><script type="module" crossorigin="" src="/assets/app.07d57fa0.js"></script><style>*,:after,:before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"}body{margin:0;line-height:inherit}h1,h2,h3{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}strong{font-weight:bolder}code,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}h1,h2,h3,p,pre{margin:0}ul{list-style:none;margin:0;padding:0}img,svg{display:block;vertical-align:middle}img{max-width:100%;height:auto}:root{--c-bg:#fff;--c-scrollbar:#eee;--c-scrollbar-hover:#bbb}html{background-color:var(--c-bg)}html{overflow:scroll}*{scrollbar-color:var(--c-scrollbar) var(--c-bg)}.prose{color:var(--fg);max-width:65ch;font-size:1rem;line-height:1.75}.prose a{color:var(--fg-deeper);text-decoration:none;font-weight:500}.prose strong{color:var(--fg-deep);font-weight:600}.prose ul>li{position:relative;padding-left:1.75em}.prose ul>li:before{content:"";position:absolute;background-color:#d1d5db;border-radius:50%;width:.375em;height:.375em;top:.6875em;left:.25em}.prose h1{color:var(--fg-deeper);font-weight:800;font-size:2.25em;margin-top:0;margin-bottom:.8888889em;line-height:1.1111111}.prose h2{color:var(--fg-deep);font-weight:700;font-size:1.5em;margin-top:2em;margin-bottom:1em;line-height:1.3333333}.prose h3{color:inherit;font-weight:600;font-size:1.25em;margin-top:1.6em;margin-bottom:.6em;line-height:1.6;opacity:.7}.prose code{color:var(--fg-deep);font-weight:600;font-size:.875em}.prose code:before{content:"`"}.prose code:after{content:"`"}.prose a code{color:#111827}.prose pre{color:#e5e7eb;overflow-x:auto;font-size:.875em;line-height:1.7142857;margin-top:1.7142857em;margin-bottom:1.7142857em;border-radius:.375rem;padding:.8571429em 1.1428571em}.prose pre code{background-color:transparent;border-width:0;border-radius:0;padding:0;font-weight:400;color:inherit;font-size:inherit;font-family:inherit;line-height:inherit}.prose pre code:before{content:none}.prose pre code:after{content:none}.prose p{margin-top:1.25em;margin-bottom:1.25em}.prose img{margin-top:2em;margin-bottom:2em}.prose ul{margin-top:1.25em;margin-bottom:1.25em;list-style-type:none}.prose li{margin-top:.5em;margin-bottom:.5em}.prose ul ul{margin-top:.75em;margin-bottom:.75em}.prose h2+*{margin-top:0}.prose h3+*{margin-top:0}.prose>:first-child{margin-top:0}.prose>:last-child{margin-bottom:0}.prose pre:not(.shiki){padding:0;margin:0;background:0 0}.prose .shiki{font-family:DM Mono,Input Mono,Fira Code,monospace;font-size:1.05em;line-height:1.4;margin:.5em 0}.prose img{width:100%}.shiki-light{background:#f8f8f8!important}.shiki-dark{background:#0e0e0e!important}html:not(.dark) .shiki-dark{display:none}.prose{--fg:#555;--fg-deep:#222;--fg-deeper:#000;color:var(--fg)}.prose a{font-weight:inherit;text-decoration:none;border-bottom:1px solid rgba(125,125,125,.3);transition:border .3s ease-in-out}.prose a:hover{border-bottom:1px solid var(--fg)}.prose a code{color:inherit}a.header-anchor{float:left;margin-top:.125em;margin-left:-1.2em;padding-right:.5em;font-size:.85em;opacity:0;text-decoration:none;border:0!important}a.header-anchor:focus,a.header-anchor:hover{text-decoration:none}h2:focus .header-anchor,h2:hover .header-anchor,h3:focus .header-anchor,h3:hover .header-anchor{opacity:.5}@media (max-width:1200px){.table-of-contents{display:none}}.table-of-contents{position:fixed;top:80px;padding-top:70px;font-size:.8em;right:10px;width:200px;bottom:0;overflow-y:auto;overflow-x:hidden;text-overflow:ellipsis;opacity:0;transition:all .4s ease-out}.table-of-contents:hover{opacity:.5}.table-of-contents ul>li:before{display:none}.table-of-contents ul>li{padding-left:.8rem}*,::after,::before{--un-rotate:0;--un-rotate-x:0;--un-rotate-y:0;--un-rotate-z:0;--un-scale-x:1;--un-scale-y:1;--un-scale-z:1;--un-skew-x:0;--un-skew-y:0;--un-translate-x:0;--un-translate-y:0;--un-translate-z:0;--un-scroll-snap-strictness:proximity;--un-border-spacing-x:0;--un-border-spacing-y:0;--un-ring-offset-shadow:0 0 rgba(0,0,0,0);--un-ring-shadow:0 0 rgba(0,0,0,0);--un-shadow:0 0 rgba(0,0,0,0);--un-ring-offset-width:0px;--un-ring-offset-color:#fff;--un-ring-width:0px;--un-ring-color:rgba(147,197,253,0.5)}[i-la-rss-square=""]{--un-icon:url("data:image/svg+xml;utf8,%3Csvg viewBox='0 0 32 32' display='inline-block' height='1.2em' width='1.2em' vertical-align='text-bottom' xmlns='http://www.w3.org/2000/svg' %3E%3Cpath fill='currentColor' d='M5 5v22h22V5zm2 2h18v18H7zm5 3a9.91 9.91 0 0 0-2 .188v2.062a7.86 7.86 0 0 1 2-.25c4.41 0 8 3.59 8 8a8.04 8.04 0 0 1-.25 2h2.063A9.923 9.923 0 0 0 22 20c0-5.516-4.484-10-10-10zm0 4a5.96 5.96 0 0 0-2 .344v2.219A3.968 3.968 0 0 1 12 16c2.207 0 4 1.793 4 4c0 .73-.219 1.41-.563 2h2.22A5.96 5.96 0 0 0 18 20c0-3.309-2.691-6-6-6zm0 4a1.999 1.999 0 1 0 0 4a1.999 1.999 0 1 0 0-4z'/%3E%3C/svg%3E");mask:var(--un-icon) no-repeat;mask-size:100% 100%;-webkit-mask:var(--un-icon) no-repeat;-webkit-mask-size:100% 100%;background-color:currentColor;display:inline-block;height:1.2em;width:1.2em;vertical-align:text-bottom}[i-ri-article-line=""]{--un-icon:url("data:image/svg+xml;utf8,%3Csvg viewBox='0 0 24 24' display='inline-block' height='1.2em' width='1.2em' vertical-align='text-bottom' xmlns='http://www.w3.org/2000/svg' %3E%3Cpath fill='currentColor' d='M20 22H4a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1zm-1-2V4H5v16h14zM7 6h4v4H7V6zm0 6h10v2H7v-2zm0 4h10v2H7v-2zm6-9h4v2h-4V7z'/%3E%3C/svg%3E");mask:var(--un-icon) no-repeat;mask-size:100% 100%;-webkit-mask:var(--un-icon) no-repeat;-webkit-mask-size:100% 100%;background-color:currentColor;display:inline-block;height:1.2em;width:1.2em;vertical-align:text-bottom}[i-ri-heart-line=""]{--un-icon:url("data:image/svg+xml;utf8,%3Csvg viewBox='0 0 24 24' display='inline-block' height='1.2em' width='1.2em' vertical-align='text-bottom' xmlns='http://www.w3.org/2000/svg' %3E%3Cpath fill='currentColor' d='M12.001 4.529a5.998 5.998 0 0 1 8.242.228a6 6 0 0 1 .236 8.236l-8.48 8.492l-8.478-8.492a6 6 0 0 1 8.48-8.464zm6.826 1.641a3.998 3.998 0 0 0-5.49-.153l-1.335 1.198l-1.336-1.197a3.999 3.999 0 0 0-5.494.154a4 4 0 0 0-.192 5.451L12 18.654l7.02-7.03a4 4 0 0 0-.193-5.454z'/%3E%3C/svg%3E");mask:var(--un-icon) no-repeat;mask-size:100% 100%;-webkit-mask:var(--un-icon) no-repeat;-webkit-mask-size:100% 100%;background-color:currentColor;display:inline-block;height:1.2em;width:1.2em;vertical-align:text-bottom}[i-ri-lightbulb-line=""]{--un-icon:url("data:image/svg+xml;utf8,%3Csvg viewBox='0 0 24 24' display='inline-block' height='1.2em' width='1.2em' vertical-align='text-bottom' xmlns='http://www.w3.org/2000/svg' %3E%3Cpath fill='currentColor' d='M9.973 18H11v-5h2v5h1.027c.132-1.202.745-2.194 1.74-3.277c.113-.122.832-.867.917-.973a6 6 0 1 0-9.37-.002c.086.107.807.853.918.974c.996 1.084 1.609 2.076 1.741 3.278zM10 20v1h4v-1h-4zm-4.246-5a8 8 0 1 1 12.49.002C17.624 15.774 16 17 16 18.5V21a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2v-2.5C8 17 6.375 15.774 5.754 15z'/%3E%3C/svg%3E");mask:var(--un-icon) no-repeat;mask-size:100% 100%;-webkit-mask:var(--un-icon) no-repeat;-webkit-mask-size:100% 100%;background-color:currentColor;display:inline-block;height:1.2em;width:1.2em;vertical-align:text-bottom}[i-ri-screenshot-line=""]{--un-icon:url("data:image/svg+xml;utf8,%3Csvg viewBox='0 0 24 24' display='inline-block' height='1.2em' width='1.2em' vertical-align='text-bottom' xmlns='http://www.w3.org/2000/svg' %3E%3Cpath fill='currentColor' d='m11.993 14.407l-1.552 1.552a4 4 0 1 1-1.418-1.41l1.555-1.556l-4.185-4.185l1.415-1.415l4.185 4.185l4.189-4.189l1.414 1.414l-4.19 4.19l1.562 1.56a4 4 0 1 1-1.414 1.414l-1.561-1.56zM7 20a2 2 0 1 0 0-4a2 2 0 0 0 0 4zm10 0a2 2 0 1 0 0-4a2 2 0 0 0 0 4zm2-7V5H5v8H3V4a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v9h-2z'/%3E%3C/svg%3E");mask:var(--un-icon) no-repeat;mask-size:100% 100%;-webkit-mask:var(--un-icon) no-repeat;-webkit-mask-size:100% 100%;background-color:currentColor;display:inline-block;height:1.2em;width:1.2em;vertical-align:text-bottom}[i-uil-github-alt=""]{--un-icon:url("data:image/svg+xml;utf8,%3Csvg viewBox='0 0 24 24' display='inline-block' height='1.2em' width='1.2em' vertical-align='text-bottom' xmlns='http://www.w3.org/2000/svg' %3E%3Cpath fill='currentColor' d='M10.07 20.503a1 1 0 0 0-1.18-.983c-1.31.24-2.963.276-3.402-.958a5.708 5.708 0 0 0-1.837-2.415a1.2 1.2 0 0 1-.167-.11a1 1 0 0 0-.93-.645h-.005a1 1 0 0 0-1 .995c-.004.815.81 1.338 1.141 1.514a4.44 4.44 0 0 1 .924 1.36c.365 1.023 1.423 2.576 4.466 2.376l.003.098l.004.268a1 1 0 0 0 2 0l-.005-.318c-.005-.19-.012-.464-.012-1.182ZM20.737 5.377a5.39 5.39 0 0 0 .09-.42a6.278 6.278 0 0 0-.408-3.293a1.002 1.002 0 0 0-.615-.58c-.356-.12-1.67-.357-4.184 1.25a13.87 13.87 0 0 0-6.354 0C6.762.75 5.455.966 5.102 1.079a.997.997 0 0 0-.631.584a6.3 6.3 0 0 0-.404 3.357c.025.127.051.246.079.354a6.27 6.27 0 0 0-1.256 3.83a8.422 8.422 0 0 0 .043.921c.334 4.603 3.334 5.984 5.424 6.459a4.591 4.591 0 0 0-.118.4a1 1 0 0 0 1.942.479a1.678 1.678 0 0 1 .468-.878a1 1 0 0 0-.546-1.745c-3.454-.395-4.954-1.802-5.18-4.899a6.61 6.61 0 0 1-.033-.738a4.258 4.258 0 0 1 .92-2.713a3.022 3.022 0 0 1 .195-.231a1 1 0 0 0 .188-1.025a3.388 3.388 0 0 1-.155-.555a4.094 4.094 0 0 1 .079-1.616a7.543 7.543 0 0 1 2.415 1.18a1.009 1.009 0 0 0 .827.133a11.777 11.777 0 0 1 6.173.001a1.005 1.005 0 0 0 .83-.138a7.572 7.572 0 0 1 2.406-1.19a4.04 4.04 0 0 1 .087 1.578a3.205 3.205 0 0 1-.169.607a1 1 0 0 0 .188 1.025c.078.087.155.18.224.268A4.122 4.122 0 0 1 20 9.203a7.039 7.039 0 0 1-.038.777c-.22 3.056-1.725 4.464-5.195 4.86a1 1 0 0 0-.546 1.746a1.63 1.63 0 0 1 .466.908a3.06 3.06 0 0 1 .093.82v2.333c-.01.648-.01 1.133-.01 1.356a1 1 0 1 0 2 0c0-.217 0-.692.01-1.34v-2.35a4.881 4.881 0 0 0-.155-1.311a4.256 4.256 0 0 0-.116-.416a6.513 6.513 0 0 0 5.445-6.424A8.697 8.697 0 0 0 22 9.203a6.13 6.13 0 0 0-1.263-3.826Z'/%3E%3C/svg%3E");mask:var(--un-icon) no-repeat;mask-size:100% 100%;-webkit-mask:var(--un-icon) no-repeat;-webkit-mask-size:100% 100%;background-color:currentColor;display:inline-block;height:1.2em;width:1.2em;vertical-align:text-bottom}.absolute{position:absolute}.z-40{z-index:40}.m-6{margin:1.5rem}.m-auto{margin:auto}.\!-mt-2{margin-top:-.5rem!important}.mb-0{margin-bottom:0}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.mt-10{margin-top:2.5rem}.mt-8{margin-top:2rem}.inline{display:inline}.h-10{height:2.5rem}.w-10{width:2.5rem}.flex{display:flex}.flex-auto{flex:1 1 auto}.select-none{user-select:none}[fill~=none]{fill:none}.px-7{padding-left:1.75rem;padding-right:1.75rem}.py-10{padding-top:2.5rem;padding-bottom:2.5rem}.pb-2{padding-bottom:.5rem}.pt-1{padding-top:.25rem}.font-mono{font-family:"DM Mono",ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}.font-sans{font-family:Inter,ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}.text-2xl{font-size:1.5rem;line-height:2rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-gray-700{--un-text-opacity:1;color:rgba(55,65,81,var(--un-text-opacity))}.no-underline{text-decoration:none}.opacity-50,[op50=""]{opacity:.5}.hover\:opacity-75:hover{opacity:.75}.outline-none{outline:2px solid transparent;outline-offset:2px}@media (max-width:767.9px){.lt-md\:hidden{display:none}}@media (min-width:768px){.md\:hidden,[md\:hidden=""]{display:none}}@media (min-width:1024px){.lg\:fixed{position:fixed}}.nav[data-v-6169d58d]{padding:2rem;width:100%;display:grid;grid-template-columns:auto max-content;box-sizing:border-box}.nav>[data-v-6169d58d]{margin:auto}.nav a[data-v-6169d58d]{cursor:pointer;text-decoration:none;color:inherit;transition:opacity .2s ease;opacity:.6;outline:0}.nav a[data-v-6169d58d]:hover{opacity:1;text-decoration-color:inherit}.nav .right[data-v-6169d58d]{display:grid;grid-gap:1.2rem;grid-auto-flow:column}.nav .right>[data-v-6169d58d]{margin:auto}</style><link rel="preload" href="/assets/index.e1648c97.css" as="style"><link rel="modulepreload" crossorigin="" href="/assets/rewrite-in-vite.fd69d769.js"><meta property="og:image" content="https://antfu.me/og-icon.png"><meta name="twitter:card" content="summary"><meta name="twitter:creator" content="@antfu7"><meta property="og:title" content="Rewrite in Vite"><meta property="og:description" content="My site is now powered by Vite!"><meta name="description" content="My site is now powered by Vite!"><meta name="head:count" content="6"><link rel="preload" as="font" crossorigin="anonymous" href="https://fonts.gstatic.com/s/dmmono/v10/aFTU7PB1QTsUX8KYhh0.ttf"><link rel="preload" as="font" crossorigin="anonymous" href="https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuLyfMZg.ttf"><link rel="preload" as="font" crossorigin="anonymous" href="https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuGKYMZg.ttf"><link rel="preload" as="font" crossorigin="anonymous" href="https://fonts.gstatic.com/s/inter/v12/UcCO3FwrK3iLTeHuS_fvQtMwCp50KnMw2boKoduKmMEVuDyYMZg.ttf"></head><body class="font-sans text-gray-700 dark:text-gray-200"><div id="app" data-server-rendered="true"><!--[--><header class="header z-40" data-v-6169d58d=""><a href="/" class="w-10 h-10 absolute lg:fixed m-6 select-none outline-none" focusable="false" data-v-6169d58d=""><img src="/logo-dark.svg" alt="logo" style="display:none" data-v-6169d58d=""><img src="/logo.svg" alt="logo" data-v-6169d58d=""></a><nav class="nav" data-v-6169d58d=""><div class="spacer" data-v-6169d58d=""></div><div class="right" data-v-6169d58d=""><a href="/posts" class="" title="Blog" data-v-6169d58d=""><span class="lt-md:hidden" data-v-6169d58d="">Blog</span><div i-ri-article-line="" md:hidden="" data-v-6169d58d=""></div></a><a href="/projects" class="" title="Projects" data-v-6169d58d=""><span class="lt-md:hidden" data-v-6169d58d="">Projects</span><div i-ri-lightbulb-line="" class="md:hidden" data-v-6169d58d=""></div></a><a href="/talks" class="lt-md:hidden" title="Talks" data-v-6169d58d="">Talks </a><a href="/podcasts" class="lt-md:hidden" title="Podcasts" data-v-6169d58d="">Podcasts </a><a href="/streams" class="lt-md:hidden" title="Streams" data-v-6169d58d="">Streams </a><a href="/demos" class="" title="Demos" data-v-6169d58d=""><span class="lt-md:hidden" data-v-6169d58d="">Demos</span><div i-ri-screenshot-line="" class="md:hidden" data-v-6169d58d=""></div></a><a href="/sponsors-list" class="" title="Sponsors" data-v-6169d58d=""><div i-ri-heart-line="" data-v-6169d58d=""></div></a><a href="https://twitter.com/antfu7" target="_blank" title="Twitter" class="lt-md:hidden" data-v-6169d58d=""><svg style="vertical-align:sub" class="inline" viewBox="0 0 24 24" width="1.2em" height="1.2em" data-v-6169d58d=""><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M23 3a10.9 10.9 0 0 1-3.14 1.53a4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg></a><a href="https://github.com/antfu" target="_blank" title="GitHub" class="lt-md:hidden" data-v-6169d58d=""><div i-uil-github-alt="" data-v-6169d58d=""></div></a><a href="/feed.xml" target="_blank" title="RSS" class="lt-md:hidden" data-v-6169d58d=""><div i-la-rss-square="" style="font-size:1.25rem;margin:0 -.125rem" data-v-6169d58d=""></div></a><a class="select-none" title="Toggle Color Scheme" data-v-6169d58d=""><svg style="vertical-align:sub;display:none" class="inline" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path fill="currentColor" d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12S6.477 2 12 2h.1A6.979 6.979 0 0 0 10 7zm-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938A7.999 7.999 0 0 0 4 12z"></path></svg><svg style="vertical-align:sub" class="inline" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path fill="currentColor" d="M12 18a6 6 0 1 1 0-12a6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8a4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636L5.636 7.05L3.515 4.93zM16.95 18.364l1.414-1.414l2.121 2.121l-1.414 1.414l-2.121-2.121zm2.121-14.85l1.414 1.415l-2.121 2.121l-1.414-1.414l2.121-2.121zM5.636 16.95l1.414 1.414l-2.121 2.121l-1.414-1.414l2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"></path></svg></a></div></nav></header><main class="px-7 py-10"><!--[--><!----><div class="prose m-auto mb-8"><h1 class="mb-0">Rewrite in Vite</h1><p class="opacity-50 !-mt-2">Feb 1, 2021 <span>· 10min</span></p><!----></div><article><!--[--><div class="prose m-auto"><p></p><div class="table-of-contents"><ul><li><ul><li><a href="#fundamentals">Fundamentals</a></li><li><a href="#dark-mode">Dark Mode</a></li><li><a href="#markdown">Markdown</a></li><li><a href="#syntax-highlighting">Syntax Highlighting</a></li><li><a href="#serve-side-generatation-ssg">Serve-Side Generatation (SSG)</a></li><li><a href="#the-vite-template">The Vite Template</a></li></ul></li><li><a href="#this-website">This Website</a></li><li><a href="#thanks">Thanks</a></li></ul></div><p></p><p>The page you are looking at is now powered by <a href="https://github.com/vitejs/vite" target="_blank" rel="noopener">Vite</a>. This is something I want to do for a long while since Vite came out, and it’s finally done. As I have mentioned in my <a href="/posts/new-house">first blog post</a>, it was powered <a href="https://gridsome.org/" target="_blank" rel="noopener">Gridsome</a> using Vue 2. With this overhaul, I can now take full advantage of Vue 3 and the <a href="https://v3.vuejs.org/guide/composition-api-introduction.html" target="_blank" rel="noopener">Composition API</a> with the new <a href="https://github.com/vuejs/rfcs/pull/227" target="_blank" rel="noopener"><code>&lt;script setup&gt;</code> SFC style</a>.</p><p>The reason for it taking me so long to do this is because I am busy (enjoy) doing <a href="https://americanexpress.io/yak-shaving" target="_blank" rel="noopener">yak shaving</a>, for the tools I need to build this site.</p><h3 id="fundamentals" tabindex="-1">Fundamentals <a class="header-anchor" href="#fundamentals" aria-hidden="true">#</a></h3><p>It begins with me trying to improve the DX using icons in <a href="/posts/journey-with-icons">this post</a>. At that time, Vue 3 just into RC, and Vite didn’t reach 1.0 yet. Hearing a lot of how good Vue 3 and Vite are, I decided to give them a try on building the icon site I want to build for a long time. Since Vite is such a brand new thing, there aren’t many tools/plugins out there, the ecosystem was way far from what Webpack has. I took that as a chance for me to dive deep into how Vite works while doing some contributions the ecosystem. Here is a few tools I made while building the app <a href="https://github.com/antfu/icones" target="_blank" rel="noopener">Icônes</a>:</p><ul><li><a href="https://github.com/antfu/vite-plugin-components" target="_blank" rel="noopener">vite-plugin-components</a> - On-demand components auto importing for Vite.</li><li><a href="https://github.com/antfu/vite-plugin-pwa" target="_blank" rel="noopener">vite-plugin-pwa</a> - Zero-config PWA for Vite.</li><li><a href="https://github.com/antfu/purge-icons" target="_blank" rel="noopener">vite-plugin-purge-icons</a> - Bundles icons on demand, with a Vite plugin.</li></ul><p>Also found some awesome tools form the community:</p><ul><li><a href="https://github.com/iconify/iconify" target="_blank" rel="noopener">Iconify</a> - Universal icon framework, by <a href="https://github.com/cyberalien" target="_blank" rel="noopener">@cyberalien</a>.</li><li><a href="https://github.com/brattonross/vite-plugin-voie" target="_blank" rel="noopener">vite-plugin-voie</a> - File system based routing for Vite, by <a href="https://github.com/brattonross" target="_blank" rel="noopener">@brattonross</a>.</li><li><a href="https://github.com/hannoeru/vite-plugin-pages" target="_blank" rel="noopener">vite-plugin-pages</a> - Another file system based route generator, by <a href="https://github.com/hannoeru" target="_blank" rel="noopener">@hannoeru</a>.</li></ul><p>With them, I got the fundamentals of a Vite project setup. Nuxt-liked file-based routing and component auto importing. I was quite satisfied with it as I could focus more on the content and logic rather than getting distracted by the routes setup and component registration.</p><p>I also learned <a href="https://tailwindcss.com/" target="_blank" rel="noopener">Tailwind CSS</a> as a replacement of the missing UI component libraries for Vue 3. It turns out that I really enjoy Tailwind’s way of rapid prototyping. As I got more control over styling things, it makes me think more about the design rather than just applying the default theme of the components library I use.</p><h3 id="dark-mode" tabindex="-1">Dark Mode <a class="header-anchor" href="#dark-mode" aria-hidden="true">#</a></h3><p>Dark mode is supported as an experimental feature in Tailwind CSS v1.8 and shipped in v2.0. It supports two modes for you to choose from - <code>media</code> and <code>class</code>. <code>media</code> is something that works out-of-box, it changes based on users’ system preference. But the limitation is that you can’t toggle it manually as you want. So I went with <code>class</code> mode where I have more controls over it. But that also means I would need to implement the toggling logic myself.</p><p>With the power of Vue’s Composition API, I am able to combine the best parts of them - reactive to the system’s preference while being able to override manually.</p><pre><code class="language-ts"><div class="shiki-container"><pre class="shiki shiki-dark" style="background-color:#121212"><code v-pre=""><span class="line"><span style="color:#4d9375">import</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">useStorage</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">usePreferredDark</span><span style="color:#dbd7ca"> </span><span style="color:#858585">}</span><span style="color:#dbd7ca"> </span><span style="color:#4d9375">from</span><span style="color:#dbd7ca"> </span><span style="color:#c98a7d">'@vueuse/core'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#cb7676">const</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">preferredDark</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#a1b567">usePreferredDark</span><span style="color:#858585">()</span></span>
<span class="line"><span style="color:#cb7676">const</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">colorSchema</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#a1b567">useStorage</span><span style="color:#858585">(</span><span style="color:#c98a7d">'color-schema'</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#c98a7d">'auto'</span><span style="color:#858585">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4d9375">export</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">const</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">isDark</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#a1b567">computed</span><span style="color:#858585">({</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#a1b567">get</span><span style="color:#858585">()</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#4d9375">return</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">colorSchema</span><span style="color:#858585">.</span><span style="color:#b8a965">value</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">===</span><span style="color:#dbd7ca"> </span><span style="color:#c98a7d">'auto'</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#cb7676">?</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">preferredDark</span><span style="color:#858585">.</span><span style="color:#b8a965">value</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#cb7676">:</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">colorSchema</span><span style="color:#858585">.</span><span style="color:#b8a965">value</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">===</span><span style="color:#dbd7ca"> </span><span style="color:#c98a7d">'dark'</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">},</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#a1b567">set</span><span style="color:#858585">(</span><span style="color:#b8a965">v</span><span style="color:#cb7676">:</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">boolean</span><span style="color:#858585">)</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#4d9375">if</span><span style="color:#dbd7ca"> </span><span style="color:#858585">(</span><span style="color:#b8a965">v</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">===</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">preferredDark</span><span style="color:#858585">.</span><span style="color:#b8a965">value</span><span style="color:#858585">)</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#b8a965">colorSchema</span><span style="color:#858585">.</span><span style="color:#b8a965">value</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#c98a7d">'auto'</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#4d9375">else</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#b8a965">colorSchema</span><span style="color:#858585">.</span><span style="color:#b8a965">value</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">v</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">?</span><span style="color:#dbd7ca"> </span><span style="color:#c98a7d">'dark'</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">:</span><span style="color:#dbd7ca"> </span><span style="color:#c98a7d">'light'</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">},</span></span>
<span class="line"><span style="color:#858585">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#a1b567">watch</span><span style="color:#858585">(</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">isDark</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">v</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=&gt;</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">document</span><span style="color:#858585">.</span><span style="color:#b8a965">documentElement</span><span style="color:#858585">.</span><span style="color:#b8a965">classList</span><span style="color:#858585">.</span><span style="color:#a1b567">toggle</span><span style="color:#858585">(</span><span style="color:#c98a7d">'dark'</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">v</span><span style="color:#858585">),</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">{</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">immediate</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#4d9375">true</span><span style="color:#dbd7ca"> </span><span style="color:#858585">},</span></span>
<span class="line"><span style="color:#858585">)</span></span>
<span class="line"></span></code></pre><pre class="shiki shiki-light" style="background-color:#fff"><code v-pre=""><span class="line"><span style="color:#1c6b48">import</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span><span style="color:#393a34"> </span><span style="color:#8c862b">useStorage</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#8c862b">usePreferredDark</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">}</span><span style="color:#393a34"> </span><span style="color:#1c6b48">from</span><span style="color:#393a34"> </span><span style="color:#b56959">'@vueuse/core'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ab5959">const</span><span style="color:#393a34"> </span><span style="color:#a65e2b">preferredDark</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#6c7834">usePreferredDark</span><span style="color:#8e8f8b">()</span></span>
<span class="line"><span style="color:#ab5959">const</span><span style="color:#393a34"> </span><span style="color:#a65e2b">colorSchema</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#6c7834">useStorage</span><span style="color:#8e8f8b">(</span><span style="color:#b56959">'color-schema'</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#b56959">'auto'</span><span style="color:#8e8f8b">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1c6b48">export</span><span style="color:#393a34"> </span><span style="color:#ab5959">const</span><span style="color:#393a34"> </span><span style="color:#a65e2b">isDark</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#6c7834">computed</span><span style="color:#8e8f8b">({</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#6c7834">get</span><span style="color:#8e8f8b">()</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#1c6b48">return</span><span style="color:#393a34"> </span><span style="color:#8c862b">colorSchema</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">value</span><span style="color:#393a34"> </span><span style="color:#ab5959">===</span><span style="color:#393a34"> </span><span style="color:#b56959">'auto'</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#ab5959">?</span><span style="color:#393a34"> </span><span style="color:#8c862b">preferredDark</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">value</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#ab5959">:</span><span style="color:#393a34"> </span><span style="color:#8c862b">colorSchema</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">value</span><span style="color:#393a34"> </span><span style="color:#ab5959">===</span><span style="color:#393a34"> </span><span style="color:#b56959">'dark'</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">},</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#6c7834">set</span><span style="color:#8e8f8b">(</span><span style="color:#8c862b">v</span><span style="color:#ab5959">:</span><span style="color:#393a34"> </span><span style="color:#b58451">boolean</span><span style="color:#8e8f8b">)</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#1c6b48">if</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">(</span><span style="color:#8c862b">v</span><span style="color:#393a34"> </span><span style="color:#ab5959">===</span><span style="color:#393a34"> </span><span style="color:#8c862b">preferredDark</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">value</span><span style="color:#8e8f8b">)</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#8c862b">colorSchema</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">value</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#b56959">'auto'</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#1c6b48">else</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#8c862b">colorSchema</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">value</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#8c862b">v</span><span style="color:#393a34"> </span><span style="color:#ab5959">?</span><span style="color:#393a34"> </span><span style="color:#b56959">'dark'</span><span style="color:#393a34"> </span><span style="color:#ab5959">:</span><span style="color:#393a34"> </span><span style="color:#b56959">'light'</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">},</span></span>
<span class="line"><span style="color:#8e8f8b">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6c7834">watch</span><span style="color:#8e8f8b">(</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">isDark</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">v</span><span style="color:#393a34"> </span><span style="color:#ab5959">=&gt;</span><span style="color:#393a34"> </span><span style="color:#8c862b">document</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">documentElement</span><span style="color:#8e8f8b">.</span><span style="color:#8c862b">classList</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">toggle</span><span style="color:#8e8f8b">(</span><span style="color:#b56959">'dark'</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#8c862b">v</span><span style="color:#8e8f8b">),</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">{</span><span style="color:#393a34"> </span><span style="color:#b58451">immediate</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#1c6b48">true</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">},</span></span>
<span class="line"><span style="color:#8e8f8b">)</span></span>
<span class="line"></span></code></pre></div></code></pre><p>Click it to try 👇🏼</p><a class="select-none text-2xl pb-2 pt-1" title="Toggle Color Scheme"><svg style="vertical-align:sub;display:none" class="inline" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path fill="currentColor" d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12S6.477 2 12 2h.1A6.979 6.979 0 0 0 10 7zm-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938A7.999 7.999 0 0 0 4 12z"></path></svg><svg style="vertical-align:sub" class="inline" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path fill="currentColor" d="M12 18a6 6 0 1 1 0-12a6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8a4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636L5.636 7.05L3.515 4.93zM16.95 18.364l1.414-1.414l2.121 2.121l-1.414 1.414l-2.121-2.121zm2.121-14.85l1.414 1.415l-2.121 2.121l-1.414-1.414l2.121-2.121zM5.636 16.95l1.414 1.414l-2.121 2.121l-1.414-1.414l2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"></path></svg></a><p>If you would like to use it in your own apps, I also extract the logic above into <a href="https://vueuse.js.org/core/usedark/" target="_blank" rel="noopener"><code>useDark()</code> in VueUse</a>. Where you can simply use like this:</p><pre><code class="language-ts"><div class="shiki-container"><pre class="shiki shiki-dark" style="background-color:#121212"><code v-pre=""><span class="line"><span style="color:#4d9375">import</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">useDark</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">useToggle</span><span style="color:#dbd7ca"> </span><span style="color:#858585">}</span><span style="color:#dbd7ca"> </span><span style="color:#4d9375">from</span><span style="color:#dbd7ca"> </span><span style="color:#c98a7d">'@vueuse/core'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#cb7676">const</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">isDark</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#a1b567">useDark</span><span style="color:#858585">()</span></span>
<span class="line"><span style="color:#cb7676">const</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">toggleDark</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#a1b567">useToggle</span><span style="color:#858585">(</span><span style="color:#b8a965">isDark</span><span style="color:#858585">)</span></span>
<span class="line"></span></code></pre><pre class="shiki shiki-light" style="background-color:#fff"><code v-pre=""><span class="line"><span style="color:#1c6b48">import</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span><span style="color:#393a34"> </span><span style="color:#8c862b">useDark</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#8c862b">useToggle</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">}</span><span style="color:#393a34"> </span><span style="color:#1c6b48">from</span><span style="color:#393a34"> </span><span style="color:#b56959">'@vueuse/core'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ab5959">const</span><span style="color:#393a34"> </span><span style="color:#a65e2b">isDark</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#6c7834">useDark</span><span style="color:#8e8f8b">()</span></span>
<span class="line"><span style="color:#ab5959">const</span><span style="color:#393a34"> </span><span style="color:#a65e2b">toggleDark</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#6c7834">useToggle</span><span style="color:#8e8f8b">(</span><span style="color:#8c862b">isDark</span><span style="color:#8e8f8b">)</span></span>
<span class="line"></span></code></pre></div></code></pre><h3 id="markdown" tabindex="-1">Markdown <a class="header-anchor" href="#markdown" aria-hidden="true">#</a></h3><p>After building Icônes, I started working on the <a href="http://codecember.ink/" target="_blank" rel="noopener">Codecember</a> project with <a href="https://blog.matsu.io/about" target="_blank" rel="noopener">@octref</a>, an initiative of learning and creating generative arts in December. With the spirit of dogfooding, we chosen Vite for building the site. In Codecember we will need to have a prompt every day with some texts, code snippets, and demos. This comes with the problem that Vite does not have a plugin for handling markdown files at that moment, so of course, I made one myself.</p><ul><li><a href="https://github.com/antfu/vite-plugin-vue-markdown" target="_blank" rel="noopener">vite-plugin-vue-markdown</a> - Markdown for Vite.</li></ul><p>Basically, it uses <a href="https://markdown-it.github.io/" target="_blank" rel="noopener"><code>markdown-it</code></a> to transform markdown into HTML and feed it into Vue’s template compiler. As the generated template is handled by Vue, we can easily support Vue components inside Markdown.</p><h3 id="syntax-highlighting" tabindex="-1">Syntax Highlighting <a class="header-anchor" href="#syntax-highlighting" aria-hidden="true">#</a></h3><p>Getting syntax highlight works in dark mode isn’t an easy task as well. <a href="https://github.com/shikijs/shiki" target="_blank" rel="noopener">Shiki</a> inlined all the colors into the HTML so you would not be bored by the CSS namespace pollution, but that also means it will be really hard to get the colors aware of your global color scheme. <a href="https://prismjs.com/" target="_blank" rel="noopener">Prism</a> on the other hand, uses the classes combining the CSS theme to do the job. It’s easier to merge two color schemes and make them aware of the <code>dark</code> trigger. The bad thing is, themes are often wrote by different authors with different styles of coloring and styling things. Sometimes, even the font and spacing could be different across different themes. If you ever ran into a similar situation, you should know what I mean. If you don’t (lucky you!), see <a href="https://github.com/PrismJS/prism-themes/tree/main/themes" target="_blank" rel="noopener">Prism’s themes collection</a>(<a href="https://github.com/PrismJS/prism-themes/blob/c24ddffde2737293d9b2df7dc59939d527648863/themes/prism-vs.css#L9" target="_blank" rel="noopener"><code>prism-vs.css</code></a> and <a href="https://github.com/PrismJS/prism-themes/blob/c24ddffde2737293d9b2df7dc59939d527648863/themes/prism-vsc-dark-plus.css#L6" target="_blank" rel="noopener"><code>prism-vsc-dark-plus.css</code></a> for example).</p><p>Fight with them for a while you might be able to ease the misalignment eventually. But what if we can have a smarter way to do this?</p><ul><li><a href="https://github.com/antfu/prism-theme-vars" target="_blank" rel="noopener">prism-theme-vars</a> - A customizable Prism.js theme using CSS variables.</li></ul><p>Instead of dealing with the lengthy CSS theme, now you can have one in less than 20 lines of CSS variables. For example:</p><pre><code class="language-css"><div class="shiki-container"><pre class="shiki shiki-dark" style="background-color:#121212"><code v-pre=""><span class="line"><span style="color:#858585">@</span><span style="color:#4d9375">import</span><span style="color:#dbd7ca"> </span><span style="color:#c98a7d">"prism-theme-vars/base.css"</span><span style="color:#858585">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#858585">:</span><span style="color:#e0a569">root</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-foreground</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">393a34</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-background</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">fbfbfb</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-comment</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">b8c4b8</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-string</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">c67b5d</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-literal</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">3a9c9b</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-keyword</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">248459</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-function</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">849145</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-deleted</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">a14f55</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-class</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">2b91af</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-builtin</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">a52727</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-property</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">ad502b</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-namespace</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">c96880</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-punctuation</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">8e8f8b</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#858585">}</span></span>
<span class="line"></span></code></pre><pre class="shiki shiki-light" style="background-color:#fff"><code v-pre=""><span class="line"><span style="color:#8e8f8b">@</span><span style="color:#1c6b48">import</span><span style="color:#393a34"> </span><span style="color:#b56959">"prism-theme-vars/base.css"</span><span style="color:#8e8f8b">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#8e8f8b">:</span><span style="color:#b58451">root</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-foreground</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">393a34</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-background</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">fbfbfb</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-comment</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">b8c4b8</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-string</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">c67b5d</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-literal</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">3a9c9b</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-keyword</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">248459</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-function</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">849145</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-deleted</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">a14f55</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-class</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">2b91af</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-builtin</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">a52727</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-property</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">ad502b</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-namespace</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">c96880</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-punctuation</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">8e8f8b</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#8e8f8b">}</span></span>
<span class="line"></span></code></pre></div></code></pre><p>To have it supports dark mode is extremely simple as well:</p><pre><code class="language-css"><div class="shiki-container"><pre class="shiki shiki-dark" style="background-color:#121212"><code v-pre=""><span class="line"><span style="color:#429988">html</span><span style="color:#858585">:</span><span style="color:#e0a569">not</span><span style="color:#858585">(.</span><span style="color:#e0a569">dark</span><span style="color:#858585">)</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-foreground</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">393a34</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-background</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">f8f8f8</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-comment</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">758575</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-namespace</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">444444</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-string</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">bc8671</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-punctuation</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">80817d</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-literal</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">36acaa</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-keyword</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">248459</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-function</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">849145</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-deleted</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">9a050f</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-class</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">2b91af</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-builtin</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">800000</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#858585">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#429988">html</span><span style="color:#858585">.</span><span style="color:#e0a569">dark</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-foreground</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">d4d4d4</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-background</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">1e1e1e</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-namespace</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">aaaaaa</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-comment</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">758575</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-namespace</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">444444</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-string</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">ce9178</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-punctuation</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">d4d4d4</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-literal</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">36acaa</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-keyword</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">38a776</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-function</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">dcdcaa</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-deleted</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">9a050f</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-class</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">4ec9b0</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">--prism-builtin</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">#</span><span style="color:#d4976c">d16969</span><span style="color:#858585">;</span></span>
<span class="line"><span style="color:#858585">}</span></span>
<span class="line"></span></code></pre><pre class="shiki shiki-light" style="background-color:#fff"><code v-pre=""><span class="line"><span style="color:#2f8a89">html</span><span style="color:#8e8f8b">:</span><span style="color:#b58451">not</span><span style="color:#8e8f8b">(.</span><span style="color:#b58451">dark</span><span style="color:#8e8f8b">)</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-foreground</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">393a34</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-background</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">f8f8f8</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-comment</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">758575</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-namespace</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">444444</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-string</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">bc8671</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-punctuation</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">80817d</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-literal</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">36acaa</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-keyword</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">248459</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-function</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">849145</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-deleted</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">9a050f</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-class</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">2b91af</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-builtin</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">800000</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#8e8f8b">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#2f8a89">html</span><span style="color:#8e8f8b">.</span><span style="color:#b58451">dark</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-foreground</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">d4d4d4</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-background</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">1e1e1e</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-namespace</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">aaaaaa</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-comment</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">758575</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-namespace</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">444444</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-string</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">ce9178</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-punctuation</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">d4d4d4</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-literal</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">36acaa</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-keyword</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">38a776</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-function</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">dcdcaa</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-deleted</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">9a050f</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-class</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">4ec9b0</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">--prism-builtin</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">#</span><span style="color:#a65e2b">d16969</span><span style="color:#8e8f8b">;</span></span>
<span class="line"><span style="color:#8e8f8b">}</span></span>
<span class="line"></span></code></pre></div></code></pre><p>That’s all. You can also play with the themes in the <a href="https://prism-theme-vars.netlify.app/" target="_blank" rel="noopener">Playground</a> and make some your own within 5 mins. I created my first code theme in my life using it, which is also exactly what you are looking at :)</p><h3 id="serve-side-generatation-ssg" tabindex="-1">Serve-Side Generatation (SSG) <a class="header-anchor" href="#serve-side-generatation-ssg" aria-hidden="true">#</a></h3><p>While Codecember is more like a site than an app, we would need to do some server-side generation to improve our <a href="https://searchengineland.com/guide/what-is-seo" target="_blank" rel="noopener">SEO</a>. Read quite a lot of code from <a href="https://github.com/vuejs/vitepress" target="_blank" rel="noopener">VitePress</a>, I came up with this plugin:</p><ul><li><a href="https://github.com/antfu/vite-ssg" target="_blank" rel="noopener">vite-ssg</a> - Server-side generation for Vite.</li></ul><p>The idea here is fairly simple: bundle the app entry, then for each route, dump the app using APIs from the <a href="https://github.com/vuejs/core/tree/main/packages/server-renderer" target="_blank" rel="noopener"><code>@vue/server-renderer</code></a> package. Simplified code here:</p><pre><code class="language-ts"><div class="shiki-container"><pre class="shiki shiki-dark" style="background-color:#121212"><code v-pre=""><span class="line"><span style="color:#4d9375">import</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">renderToString</span><span style="color:#dbd7ca"> </span><span style="color:#858585">}</span><span style="color:#dbd7ca"> </span><span style="color:#4d9375">from</span><span style="color:#dbd7ca"> </span><span style="color:#c98a7d">'@vue/server-renderer'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#cb7676">const</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">createApp</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#a1b567">required</span><span style="color:#858585">(</span><span style="color:#c98a7d">'dist-ssr/app.js'</span><span style="color:#858585">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#4d9375">await</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">Promise</span><span style="color:#858585">.</span><span style="color:#a1b567">all</span><span style="color:#858585">(</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#b8a965">routes</span><span style="color:#858585">.</span><span style="color:#a1b567">map</span><span style="color:#858585">(</span><span style="color:#cb7676">async</span><span style="color:#858585">(</span><span style="color:#b8a965">route</span><span style="color:#858585">)</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=&gt;</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#cb7676">const</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">app</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">router</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">head</span><span style="color:#dbd7ca"> </span><span style="color:#858585">}</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#a1b567">createApp</span><span style="color:#858585">(</span><span style="color:#4d9375">false</span><span style="color:#858585">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#b8a965">router</span><span style="color:#858585">.</span><span style="color:#a1b567">push</span><span style="color:#858585">(</span><span style="color:#b8a965">route</span><span style="color:#858585">)</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#4d9375">await</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">router</span><span style="color:#858585">.</span><span style="color:#a1b567">isReady</span><span style="color:#858585">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#cb7676">const</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">appHTML</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#4d9375">await</span><span style="color:#dbd7ca"> </span><span style="color:#a1b567">renderToString</span><span style="color:#858585">(</span><span style="color:#b8a965">app</span><span style="color:#858585">)</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#cb7676">const</span><span style="color:#dbd7ca"> </span><span style="color:#d4976c">renderedHTML</span><span style="color:#dbd7ca"> </span><span style="color:#cb7676">=</span><span style="color:#dbd7ca"> </span><span style="color:#a1b567">renderHTML</span><span style="color:#858585">(</span><span style="color:#b8a965">indexHTML</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">appHTML</span><span style="color:#858585">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#4d9375">await</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">fs</span><span style="color:#858585">.</span><span style="color:#a1b567">writeFile</span><span style="color:#858585">(</span><span style="color:#c98a7d">`</span><span style="color:#858585">${</span><span style="color:#c98a7d">route</span><span style="color:#858585">}</span><span style="color:#c98a7d">.html`</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">renderedHTML</span><span style="color:#858585">,</span><span style="color:#dbd7ca"> </span><span style="color:#c98a7d">'utf-8'</span><span style="color:#858585">)</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">})</span></span>
<span class="line"><span style="color:#858585">)</span></span>
<span class="line"></span></code></pre><pre class="shiki shiki-light" style="background-color:#fff"><code v-pre=""><span class="line"><span style="color:#1c6b48">import</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span><span style="color:#393a34"> </span><span style="color:#8c862b">renderToString</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">}</span><span style="color:#393a34"> </span><span style="color:#1c6b48">from</span><span style="color:#393a34"> </span><span style="color:#b56959">'@vue/server-renderer'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ab5959">const</span><span style="color:#393a34"> </span><span style="color:#a65e2b">createApp</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#6c7834">required</span><span style="color:#8e8f8b">(</span><span style="color:#b56959">'dist-ssr/app.js'</span><span style="color:#8e8f8b">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#1c6b48">await</span><span style="color:#393a34"> </span><span style="color:#b58451">Promise</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">all</span><span style="color:#8e8f8b">(</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8c862b">routes</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">map</span><span style="color:#8e8f8b">(</span><span style="color:#ab5959">async</span><span style="color:#8e8f8b">(</span><span style="color:#8c862b">route</span><span style="color:#8e8f8b">)</span><span style="color:#393a34"> </span><span style="color:#ab5959">=&gt;</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#ab5959">const</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span><span style="color:#393a34"> </span><span style="color:#a65e2b">app</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#a65e2b">router</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#a65e2b">head</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">}</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#6c7834">createApp</span><span style="color:#8e8f8b">(</span><span style="color:#1c6b48">false</span><span style="color:#8e8f8b">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8c862b">router</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">push</span><span style="color:#8e8f8b">(</span><span style="color:#8c862b">route</span><span style="color:#8e8f8b">)</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#1c6b48">await</span><span style="color:#393a34"> </span><span style="color:#8c862b">router</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">isReady</span><span style="color:#8e8f8b">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#ab5959">const</span><span style="color:#393a34"> </span><span style="color:#a65e2b">appHTML</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#1c6b48">await</span><span style="color:#393a34"> </span><span style="color:#6c7834">renderToString</span><span style="color:#8e8f8b">(</span><span style="color:#8c862b">app</span><span style="color:#8e8f8b">)</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#ab5959">const</span><span style="color:#393a34"> </span><span style="color:#a65e2b">renderedHTML</span><span style="color:#393a34"> </span><span style="color:#ab5959">=</span><span style="color:#393a34"> </span><span style="color:#6c7834">renderHTML</span><span style="color:#8e8f8b">(</span><span style="color:#8c862b">indexHTML</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#8c862b">appHTML</span><span style="color:#8e8f8b">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#1c6b48">await</span><span style="color:#393a34"> </span><span style="color:#8c862b">fs</span><span style="color:#8e8f8b">.</span><span style="color:#6c7834">writeFile</span><span style="color:#8e8f8b">(</span><span style="color:#b56959">`</span><span style="color:#8e8f8b">${</span><span style="color:#b56959">route</span><span style="color:#8e8f8b">}</span><span style="color:#b56959">.html`</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#8c862b">renderedHTML</span><span style="color:#8e8f8b">,</span><span style="color:#393a34"> </span><span style="color:#b56959">'utf-8'</span><span style="color:#8e8f8b">)</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">})</span></span>
<span class="line"><span style="color:#8e8f8b">)</span></span>
<span class="line"></span></code></pre></div></code></pre><p>The full code can be found <a href="https://github.com/antfu/vite-ssg/blob/fa256449923e05e55bf15dcf4747d517bc22e33a/src/node/build.ts#L94-L104" target="_blank" rel="noopener">here</a>.</p><p>With the <a href="https://github.com/vueuse/head" target="_blank" rel="noopener">@vueuse/head</a> package made by <a href="https://github.com/egoist" target="_blank" rel="noopener">@egoist</a>, I made the document head/meta manipulation in SSG with ease. Combining with <a href="https://github.com/antfu/vite-plugin-vue-markdown" target="_blank" rel="noopener">vite-plugin-vue-markdown</a>, you can even use the frontmatter to set the meta (title, description, og:image, etc.).</p><pre><code class="language-html"><div class="shiki-container"><pre class="shiki shiki-dark" style="background-color:#121212"><code v-pre=""><span class="line"><span style="color:#858585">&lt;</span><span style="color:#429988">script</span><span style="color:#dbd7ca"> </span><span style="color:#e0a569">setup</span><span style="color:#858585">&gt;</span></span>
<span class="line"><span style="color:#4d9375">import</span><span style="color:#dbd7ca"> </span><span style="color:#858585">{</span><span style="color:#dbd7ca"> </span><span style="color:#b8a965">useHead</span><span style="color:#dbd7ca"> </span><span style="color:#858585">}</span><span style="color:#dbd7ca"> </span><span style="color:#4d9375">from</span><span style="color:#dbd7ca"> </span><span style="color:#c98a7d">'@vueuse/head'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#a1b567">useHead</span><span style="color:#858585">({</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#e0a569">title</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#c98a7d">'Website Title'</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#e0a569">meta</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#858585">[</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#858585">{</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#e0a569">name</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#c98a7d">'description'</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">      </span><span style="color:#e0a569">content</span><span style="color:#858585">:</span><span style="color:#dbd7ca"> </span><span style="color:#c98a7d">'Website description'</span><span style="color:#858585">,</span></span>
<span class="line"><span style="color:#dbd7ca">    </span><span style="color:#858585">},</span></span>
<span class="line"><span style="color:#dbd7ca">  </span><span style="color:#858585">],</span></span>
<span class="line"><span style="color:#858585">})</span></span>
<span class="line"><span style="color:#858585">&lt;/</span><span style="color:#429988">script</span><span style="color:#858585">&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki shiki-light" style="background-color:#fff"><code v-pre=""><span class="line"><span style="color:#8e8f8b">&lt;</span><span style="color:#2f8a89">script</span><span style="color:#393a34"> </span><span style="color:#b58451">setup</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"><span style="color:#1c6b48">import</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">{</span><span style="color:#393a34"> </span><span style="color:#8c862b">useHead</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">}</span><span style="color:#393a34"> </span><span style="color:#1c6b48">from</span><span style="color:#393a34"> </span><span style="color:#b56959">'@vueuse/head'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6c7834">useHead</span><span style="color:#8e8f8b">({</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#b58451">title</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#b56959">'Website Title'</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#b58451">meta</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#8e8f8b">[</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8e8f8b">{</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#b58451">name</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#b56959">'description'</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">      </span><span style="color:#b58451">content</span><span style="color:#8e8f8b">:</span><span style="color:#393a34"> </span><span style="color:#b56959">'Website description'</span><span style="color:#8e8f8b">,</span></span>
<span class="line"><span style="color:#393a34">    </span><span style="color:#8e8f8b">},</span></span>
<span class="line"><span style="color:#393a34">  </span><span style="color:#8e8f8b">],</span></span>
<span class="line"><span style="color:#8e8f8b">})</span></span>
<span class="line"><span style="color:#8e8f8b">&lt;/</span><span style="color:#2f8a89">script</span><span style="color:#8e8f8b">&gt;</span></span>
<span class="line"></span></code></pre></div></code></pre><h3 id="the-vite-template" tabindex="-1">The Vite Template <a class="header-anchor" href="#the-vite-template" aria-hidden="true">#</a></h3><p>I found myself making small web apps frequently. Setting up plugins and configs for Vite kinda becomes the bottleneck for me to make my idea landded. So combining with those tools I am using, I made an opinionated template for myself but unexpectedly got quite some good feedback:</p><ul><li><a href="https://github.com/antfu/vitesse" target="_blank" rel="noopener">Vitesse</a> - Opinionated Vite Starter Template</li></ul><h2 id="this-website" tabindex="-1">This Website <a class="header-anchor" href="#this-website" aria-hidden="true">#</a></h2><p>This site is <strong>made from <a href="https://github.com/antfu/vitesse" target="_blank" rel="noopener">Vitesse</a> combining with all the tools I mentioned above</strong>. To be honest, even making a static site generator right is something hard to me, not to mention that most of the hard parts are already handled by Vite. I am really happy to see so many things I have learned and crafted along the way. And glad I can make these contributions to the Vite ecosystem, that someone could find my work useful for building their apps.</p><h2 id="thanks" tabindex="-1">Thanks <a class="header-anchor" href="#thanks" aria-hidden="true">#</a></h2><p>I can’t make all these happened without the help/support from the great community, thank y’all!</p><p>Also want to have some special thanks to people made significant contributions towards these projects 🙌 (A-Z)</p><ul><li><a href="https://github.com/hannoeru" target="_blank" rel="noopener">@hannoeru</a></li><li><a href="https://github.com/matias-capeletto" target="_blank" rel="noopener">@matias-capeletto</a></li><li><a href="https://github.com/privatenumber" target="_blank" rel="noopener">@privatenumber</a></li><li><a href="https://github.com/sibbng" target="_blank" rel="noopener">@sibbng</a></li></ul><p>Appreciation to my sponsors as well for supporting my works:</p><p align="center"><a href="https://cdn.jsdelivr.net/gh/antfu/static/sponsors.svg"><img src="https://cdn.jsdelivr.net/gh/antfu/static/sponsors.svg"></a></p><p>And thank you for reading through!</p><p><strong>This site is now open sourced at <a href="https://github.com/antfu/antfu.me" target="_blank" rel="noopener">antfu/antfu.me</a></strong></p></div><!--]--></article><div class="prose m-auto mt-8 mb-8"><a href="https://twitter.com/intent/tweet?text=Reading%20%40antfu7's%20https%3A%2F%2Fantfu.me%2Fposts%2Frewrite-in-vite%0A%0AI%20think..." target="_blank" op50="">comment on twitter</a><br><a href="/posts" class="font-mono no-underline opacity-50 hover:opacity-75">cd ..</a></div><!--]--><div class="mt-10 mb-6 prose m-auto opacity-50 flex"><span class="text-sm"><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" style="color:inherit">CC BY-NC-SA 4.0</a> 2021-PRESENT © Anthony Fu</span><div class="flex-auto"></div></div></main><!--]--></div><script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><link rel="stylesheet" href="/assets/index.e1648c97.css"></body></html>